- type: entity
  id: BaseTeleportEffect
  abstract: true
  components:
  - type: Transform
    anchored: true
  - type: Clickable
  - type: InteractionOutline
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/Effects/Grenades/Supermatter/supermatter_start.ogg
      volume: 5
  - type: SoundOnTrigger #send trigger event to delete with sound
    removeOnTrigger: true
    sound:
      path: /Audio/Effects/Grenades/Supermatter/supermatter_end.ogg
      volume: 5
  - type: Physics
    bodyType: Dynamic
    fixedRotation: false
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.25,0.25,0.25"
        density: 20
        mask:
        - ItemMask
  - type: DeleteOnTrigger
  - type: Tag
    tags:
    - TeleportImmune


- type: entity
  id: TeleportToEffect
  parent: BaseTeleportEffect
  name: bluespace distortion
  description: Something's about to arrive...
  categories: [ HideSpawnMenu ]
  components:
  - type: WarpPoint #it's there if you can catch it for the few seconds it'll exist
    location: Teleportation Warp Point
    follow: true
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/Effects/Grenades/Supermatter/whitehole_start.ogg
      volume: 5
  - type: AmbientSound
    enabled: true
    volume: -5
    range: 10
    sound:
      path: /Audio/Effects/Grenades/Supermatter/whitehole_loop.ogg
  - type: GravityWell
    maxRange: 2
    baseRadialAcceleration: -1
    baseTangentialAcceleration: -0.25
    gravPulsePeriod: 0.03
  - type: SingularityDistortion
    intensity: -75
    falloffPower: 1.5
  - type: PointLight
    enabled: true
    color: "#ffffff"
    energy: 5
    radius: 5
    softness: 1
    offset: "0, 0"

- type: entity
  id: TeleportFromEffect
  parent: BaseTeleportEffect
  name: bluespace distortion
  description: Reality pushed through a pinhole.
  categories: [ HideSpawnMenu ]
  components:
    - type: AmbientSound
      enabled: true
      volume: -5
      range: 10
      sound:
        path: /Audio/Effects/Grenades/Supermatter/supermatter_loop.ogg
    - type: GravityWell
      maxRange: 2
      baseRadialAcceleration: 1
      baseTangentialAcceleration: 0.25
      gravPulsePeriod: 0.03
      minRange: 0.075 #prevents entities vibrating about if they are directly in the centre
    - type: SingularityDistortion
      intensity: 75
      falloffPower: 1.5
    - type: PointLight
      enabled: true
      color: "#ffffff"
      energy: 5
      radius: 5
      softness: 1
      offset: "0, 0"

- type: entity
  id: TeleportToEffectQuiet
  parent: BaseTeleportEffect
  name: bluespace distortion
  description: Rare to see, rarer to survive what comes through.
  categories: [ HideSpawnMenu ]
  components:
  - type: WarpPoint #it's there if you can catch it for the few seconds it'll exist
    location: Teleportation Warp Point
    follow: true
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/Effects/Grenades/Supermatter/whitehole_start.ogg
      volume: -5
      range: 2
  - type: SoundOnTrigger #send trigger event to delete with sound
    removeOnTrigger: true
    sound:
      path: /Audio/Effects/Grenades/Supermatter/supermatter_end.ogg
      volume: -3
      range: 4
  - type: AmbientSound
    enabled: true
    volume: -5
    range: 4
    sound:
      path: /Audio/Effects/Grenades/Supermatter/whitehole_loop.ogg
  - type: GravityWell
    maxRange: 1
    baseRadialAcceleration: -0.25
    baseTangentialAcceleration: -0.25
    gravPulsePeriod: 0.03
  - type: SingularityDistortion
    intensity: -25
    falloffPower: 1.5
  - type: PointLight
    enabled: true
    color: "#a05555"
    energy: 1
    radius: 1
    softness: 1
    offset: "0, 0"

- type: entity
  id: TeleportFromEffectQuiet
  parent: BaseTeleportEffect
  name: bluespace distortion
  description: The barest of distortions.
  categories: [ HideSpawnMenu ]
  components:
    - type: EmitSoundOnSpawn
      sound:
        path: /Audio/Effects/Grenades/Supermatter/supermatter_start.ogg
        volume: -5
        range: 2
    - type: SoundOnTrigger #send trigger event to delete with sound
      removeOnTrigger: true
      sound:
        path: /Audio/Effects/Grenades/Supermatter/supermatter_end.ogg
        volume: -3
        range: 4
    - type: AmbientSound
      enabled: true
      volume: -5
      range: 4
      sound:
        path: /Audio/Effects/Grenades/Supermatter/supermatter_loop.ogg
    - type: GravityWell
      maxRange: 1
      baseRadialAcceleration: 0.5
      baseTangentialAcceleration: 0.25
      gravPulsePeriod: 0.03
      minRange: 0.075 #prevents entities vibrating about if they are directly in the centre
    - type: SingularityDistortion
      intensity: 25
      falloffPower: 1.5
    - type: PointLight
      enabled: true
      color: "#a05555"
      energy: 1
      radius: 1
      softness: 1
      offset: "0, 0"

