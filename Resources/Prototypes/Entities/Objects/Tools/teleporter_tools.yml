- type: entity
  id: BaseTeleportBeacon #for items that can act as beacons
  abstract: true
  components:
    - type: TeleframeBeacon
    - type: NameIdentifier
      group: CargoTelepads
    - type: DeviceList
    - type: DeviceNetwork
      deviceNetId: Wired
      receiveFrequencyId: BasicDevice
    - type: DeviceLinkSource
      range: 20000 #can't link across different maps but should be able to function once set up?
      ports:
        - TeleportBeaconSender

- type: entity
  id: TeleportBeacon
  parent: BaseTeleportBeacon
  name: teleport beacon
  description: Can be linked to a teleframe console, allowing it to be targeted over any distance. Must be anchored.
  components:
    - type: Physics
      bodyType: Dynamic
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeAabb
            bounds: "-0.25,-0.4,0.25,0.1"
          density: 20
          mask:
            - Impassable
    - type: Item
      size: Normal
      inhandVisuals:
        left:
        - state: inhand-left
        right:
        - state: inhand-right
    - type: Anchorable
      delay: 0.5
    - type: TeleframeBeacon
      ValidBeacon: false
    - type: Clickable
    - type: InteractionOutline
    - type: Appearance
    - type: GenericVisualizer
      visuals:
        enum.AnchorVisuals.Anchored:
          anchorLayer:
            True: { state: icon_anchored }
            False: { state: icon}
    - type: Sprite
      sprite: Objects/Specific/Research/teleportbeacon.rsi
      drawdepth: SmallObjects
      noRot: true
      layers:
        - state: icon_anchored
          map: [ "anchorLayer" ]

- type: entity
  id: TeleportBeaconAnchored #teleport beacon that can be placed pre-anchored in the map editor
  parent: TeleportBeacon
  name: teleport beacon
  suffix: Anchored
  description: Can be linked to a teleframe console, allowing it to be targeted over any distance. Must be anchored.
  components:
    - type: Transform
      anchored: true

- type: entity
  name: handheld teleframe console
  parent: [BaseHandheldComputer, BaseTeleportBeacon]
  id: HandHeldTeleframeConsole
  description: A miniaturised teleframe console with built-in teleport beacon.
  components:
  - type: Item
    sprite: Objects/Tools/handheld_teleframe_console.rsi
  - type: Sprite
    sprite: Objects/Tools/handheld_teleframe_console.rsi
    state: icon
    layers:
      - state: icon
      - state: scanner
        shader: unshaded
        visible: false
        map: [ "enum.PowerDeviceVisualLayers.Powered" ]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.PowerCellSlotVisuals.Enabled:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
  - type: DeviceList
  - type: DeviceNetwork
    deviceNetId: Wired
  - type: DeviceLinkSource
    range: 20000
    ports:
      - TeleportSender
      - TeleportBeaconSender
  - type: DeviceLinkSink
    ports:
      - TeleportBeaconReceiver
  - type: TeleframeConsole
    maxRange: 20000
    announcementChannel: Science
  - type: ActivatableUI
    key: enum.TeleframeConsoleUiKey.Key
    inHandsOnly: true
    singleUser: true
  - type: UserInterface
    interfaces:
      enum.TeleframeConsoleUiKey.Key:
        type: TeleframeConsoleBoundUserInterface
      enum.WiresUiKey.Key:
        type: WiresBoundUserInterface
  - type: Computer
  - type: ContainerContainer
    containers:
      board: !type:Container
  - type: Speech
    speechVerb: Robotic
  - type: PowerCellDraw
    drawRate: 1.5
  - type: ToggleCellDraw
  - type: StaticPrice
    price: 200

- type: entity
  name: handheld teleframe console
  parent: HandHeldTeleframeConsole
  id: HandHeldTeleframeConsoleEmpty
  description: A miniaturised teleframe console with built-in teleport beacon.
  suffix: Empty
  components:
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
