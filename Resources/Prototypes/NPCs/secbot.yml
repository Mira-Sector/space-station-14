- type: htnCompound
  id: SecbotCompound
  branches:
    - tasks:
        - !type:HTNCompoundTask
          task: ArrestWantedNearbyCompound

    - tasks:
        - !type:HTNCompoundTask
          task: IdleCompound

- type: htnCompound
  id: ArrestWantedNearbyCompound
  branches:
    - tasks:
        - !type:HTNPrimitiveTask
          operator: !type:PickNearbyWantedOperator
            targetKey: StunTarget
            targetMoveKey: TargetCoordinates

        - !type:HTNPrimitiveTask
          operator: !type:MoveToOperator
            pathfindInPlanning: false
            removeKeyOnFinish: false

        - !type:HTNCompoundTask
          task: ArrestTargetCompound

- type: htnCompound
  id: ArrestTargetCompound
  branches:
    - preconditions:
        - !type:TargetStunnedPrecondition
          stunned: true
          targetKey: StunTarget
      tasks:
        - !type:HTNPrimitiveTask
          operator: !type:ForceHandcuffOperator
            targetKey: StunTarget
        - !type:HTNPrimitiveTask
          operator: !type:SendRadioOperator
            message: securitron-target-arrested
            radioChannel: Security
            key: StunTarget

    - preconditions:
        - !type:TargetStunnedPrecondition
          stunned: false
          targetKey: StunTarget
      tasks:
        - !type:HTNPrimitiveTask
          operator: !type:MeleeOperator
            targetKey: StunTarget
